window.drawTri=function(W,t){var b,U,m,c,k=0,g=1,x=2,h,l,j,a,C,D,i,u,v,w,n,o,p,y,z,A,M,N,O,P,Q,R,S,T;a=Array(16);var V=t.width,B,e,H,d,I,f,q,r,s,E,F,G,J,K,L;for(U=0;U<W.length;U++){a=W[U];a[1+2*k]>a[1+2*g]&&(g=(k+=g-=k)-g);a[1+2*g]>a[1+2*x]&&(x=(g+=x-=g)-x);a[1+2*k]>a[1+2*g]&&(g=(k+=g-=k)-g);B=a[0+2*k];e=a[1+2*k];H=a[0+2*g];d=a[1+2*g];I=a[0+2*x];f=a[1+2*x];q=a[6+3*k];r=a[7+3*k];s=a[8+3*k];E=a[6+3*g];F=a[7+3*g];G=a[8+3*g];J=a[6+3*x];K=a[7+3*x];L=a[8+3*x];if(e!==d){c=(d-e)/(f-e);j=c*(I-B)+B;a=d;h=c*
(J-q)+q;i=c*(K-r)+r;b=c*(L-s)+s;c=Math.round(B);l=Math.round(B);u=q;v=r;w=s;n=q;o=r;p=s;y=q;z=r;A=s;C=(H-B)/(d-e);j=(j-B)/(a-e);T=S=R=0;C>j?(D=j,j=C,C=D,O=(E-q)/(d-e),P=(F-r)/(d-e),Q=(G-s)/(d-e),D=(q-h)/(e-a),M=(r-i)/(e-a),N=(s-b)/(e-a)):(D=(E-q)/(d-e),M=(F-r)/(d-e),N=(G-s)/(d-e),O=(q-h)/(e-a),P=(r-i)/(e-a),Q=(s-b)/(e-a));i=Math.round(e);for(b=0;i<a;){h=Math.floor(c);for(b=Math.ceil(b);0<=b;b--)m=4*V*i+4*h,m<t.data.length&&h<V&&0<h&&(t.data[m+0]=u,t.data[m+1]=v,t.data[m+2]=w,t.data[m+3]=255),h++,
u+=R,v+=S,w+=T;i++;c+=C;l+=j;b=l-c;n+=D;o+=M;p+=N;y+=O;z+=P;A+=Q;R=(y-n)/b;T=(A-p)/b;S=(z-o)/b;u=n;v=o;w=p}}if(d!==f){c=(d-e)/(f-e);j=c*(I-B)+B;a=d;h=c*(J-q)+q;i=c*(K-r)+r;b=c*(L-s)+s;j<H?(c=Math.round(j),l=Math.round(H),C=(I-j)/(f-a),j=(I-H)/(f-d),u=h,v=i,w=b,n=h,o=i,p=b,y=E,z=F,A=G,O=(J-E)/(f-d),P=(K-F)/(f-d),Q=(L-G)/(f-d),D=(J-h)/(f-a),M=(K-i)/(f-a),N=(L-b)/(f-a)):(l=Math.round(j),c=Math.round(H),j=(I-j)/(f-a),C=(I-H)/(f-d),u=E,v=F,w=G,n=E,o=F,p=G,y=h,z=i,A=b,D=(J-E)/(f-d),M=(K-F)/(f-d),N=(L-G)/
(f-d),O=(J-h)/(f-a),P=(K-i)/(f-a),Q=(L-b)/(f-a));R=(y-n)/(l-c);S=(z-o)/(l-c);T=(A-p)/(l-c);i=Math.round(d);for(b=l-c;i<f;){h=Math.round(c);for(b=Math.round(b);0<=b;b--)m=4*V*i+4*h,m<t.data.length&&h<V&&0<h&&(t.data[m+0]=u,t.data[m+1]=v,t.data[m+2]=w,t.data[m+3]=255),h++,u+=R,v+=S,w+=T;i++;c+=C;l+=j;b=l-c;n+=D;o+=M;p+=N;y+=O;z+=P;A+=Q;R=(y-n)/b;T=(A-p)/b;S=(z-o)/b;u=n;v=o;w=p}}}};
