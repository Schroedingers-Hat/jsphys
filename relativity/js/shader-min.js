window.drawTri=function(Y,x,Z){var i,V,n,k,b,l=0,f=1,y=2,g,m,j,a,D,E,h,u,v,w,o,p,q,z,A,B,N,O,P,Q,R,S,T,U;a=Array(16);var W=x.width,X=x.data.length,C,d,I,c,J,e,r,s,t,F,G,H,K,L,M;for(V=0;V<Z;V++){a=Y[V];a[1+2*l]>a[1+2*f]&&(f=(l+=f-=l)-f);a[1+2*f]>a[1+2*y]&&(y=(f+=y-=f)-y);a[1+2*l]>a[1+2*f]&&(f=(l+=f-=l)-f);C=a[0+2*l];d=a[1+2*l];I=a[0+2*f];c=a[1+2*f];J=a[0+2*y];e=a[1+2*y];r=a[6+3*l];s=a[7+3*l];t=a[8+3*l];F=a[6+3*f];G=a[7+3*f];H=a[8+3*f];K=a[6+3*y];L=a[7+3*y];M=a[8+3*y];if(d!==c){b=(c-d)/(e-d);j=b*(J-
C)+C;a=c;k=b*(K-r)+r;g=b*(L-s)+s;h=b*(M-t)+t;b=Math.round(C);m=Math.round(C);u=r;v=s;w=t;o=r;p=s;q=t;z=r;A=s;B=t;D=(I-C)/(c-d);j=(j-C)/(a-d);U=T=S=0;D>j?(E=j,j=D,D=E,P=(F-r)/(c-d),Q=(G-s)/(c-d),R=(H-t)/(c-d),E=(r-k)/(d-a),N=(s-g)/(d-a),O=(t-h)/(d-a)):(E=(F-r)/(c-d),N=(G-s)/(c-d),O=(H-t)/(c-d),P=(r-k)/(d-a),Q=(s-g)/(d-a),R=(t-h)/(d-a));h=Math.round(d);for(i=0;h<a;){k=4*W*h;g=Math.floor(b);for(i=Math.ceil(i);i--;)n=k+4*g,n<X&&g<W&&0<g&&(x.data[n+0]=u,x.data[n+1]=v,x.data[n+2]=w,x.data[n+3]=255),g++,
u+=S,v+=T,w+=U;h++;b+=D;m+=j;i=m-b;o+=E;p+=N;q+=O;z+=P;A+=Q;B+=R;S=(z-o)/i;U=(B-q)/i;T=(A-p)/i;u=o;v=p;w=q}}if(c!==e){b=(c-d)/(e-d);j=b*(J-C)+C;a=c;k=b*(K-r)+r;g=b*(L-s)+s;h=b*(M-t)+t;j<I?(b=Math.round(j),m=Math.round(I),D=(J-j)/(e-a),j=(J-I)/(e-c),u=k,v=g,w=h,o=k,p=g,q=h,z=F,A=G,B=H,P=(K-F)/(e-c),Q=(L-G)/(e-c),R=(M-H)/(e-c),E=(K-k)/(e-a),N=(L-g)/(e-a),O=(M-h)/(e-a)):(m=Math.round(j),b=Math.round(I),j=(J-j)/(e-a),D=(J-I)/(e-c),u=F,v=G,w=H,o=F,p=G,q=H,z=k,A=g,B=h,E=(K-F)/(e-c),N=(L-G)/(e-c),O=(M-H)/
(e-c),P=(K-k)/(e-a),Q=(L-g)/(e-a),R=(M-h)/(e-a));S=(z-o)/(m-b);T=(A-p)/(m-b);U=(B-q)/(m-b);h=Math.round(c);for(i=m-b;h<e;){k=4*W*h;g=Math.round(b);for(i=Math.ceil(i);i--;)n=k+4*g,n<X&&g<W&&0<g&&(x.data[n+0]=u,x.data[n+1]=v,x.data[n+2]=w,x.data[n+3]=255),g++,u+=S,v+=T,w+=U;h++;b+=D;m+=j;i=m-b;o+=E;p+=N;q+=O;z+=P;A+=Q;B+=R;S=(z-o)/i;U=(B-q)/i;T=(A-p)/i;u=o;v=p;w=q}}}};
